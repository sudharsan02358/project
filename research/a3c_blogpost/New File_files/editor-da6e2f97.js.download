System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-codemirror.js"],(function(){"use strict";var e,t,n,o,i,r,s,a,l,c,m,u,d,f,h,p,g,x,v,y,b,S,w,k,C,j;return{setters:[function(a){e=a.o,t=a.a,n=a.j,o=a.f,i=a.a0,a.a1,r=a.b,s=a.d},function(e){a=e.B,l=e.P,c=e.y,m=e.T,u=e.aI,d=e.t,f=e.o,h=e.z,p=e.Y,g=e.aT,x=e.I,v=e.C,y=e.m,b=e.k,S=e.a7,w=e.X,k=e.aU,C=e.v},function(e){j=e.__moduleExports}],execute:function(){const q=new WeakMap;function L(e){return O(e.querySelector(".js-new-filename-field"))}function M(e){return Array.from(e.querySelectorAll(".js-check-for-fork")).some(c)}function T(e){return!M(e)&&(!!function(e){const t=e.querySelector(".js-blob-filename"),n=t.value;return"."!==n&&".."!==n&&".git"!==n&&/\S/.test(t.value)}(e)&&(function(e){const t=e.querySelector(".js-blob-contents");return"true"===t.getAttribute("data-allow-unchanged")||O(t)}(e)||L(e)))}let A=null;function E(){const e=document.querySelector(".js-blob-form"),t=e.querySelector(".js-blob-submit");t instanceof HTMLButtonElement&&(t.disabled=!T(e)),e.querySelector(".js-blob-contents-changed").value=function(e){const t=e.querySelector(".js-blob-contents");return!!t.getAttribute("data-allow-unchanged")||O(t)}(e).toString(),A&&(!function(e){return O(e.querySelector(".js-blob-contents"))||L(e)}(e)?window.onbeforeunload=null:window.onbeforeunload=A)}function O(e){return null==e||("hidden"===e.type?e.value!==e.getAttribute("data-default-value"):e.value!==e.defaultValue)}function P(e){!function(e){const t=R()+e.value;document.querySelector(".js-new-filename-field").value=t}(e),function(e){let t=!0,n=e.value?"Create "+e.value:"Create new file";const o=e.closest("form"),i=document.querySelector(".js-blob-contents"),r=o.querySelector(".js-new-blob-commit-summary");if(!r)return;const s=document.querySelector(".js-commit-message-fallback"),a=q.get(i),l=document.querySelector(".js-new-filename-field").value;if(a)if(l!==a){const o=O(i)?"Update and rename":"Rename";if(e.value.length&&l.length){const e=a.split("/"),i=l.split("/"),r=e.length-1;for(let n=0;n<e.length;n++){const o=e[n];n!==r&&o!==i[n]&&(t=!1)}n=e.length===i.length&&t?`${o} ${e[r]} to ${i[r]}`:`${o} ${a} to ${l}`}else n=`${o} ${a}`}else l===a&&(n="Update "+e.value);r.setAttribute("placeholder",n),s.value=n}(e),E()}function I(e){function t(){e.focus(),e.setSelectionRange(0,0)}for(;e.value.split("/").length>1;){const n=e.value.split("/"),o=n[0],i=n.slice(1).join("/");""===o||"."===o||".git"===o?(e.value=i,window.setTimeout(t,1)):".."===o?H(e):D(e,o,i)}}function N(e){const t=R();for(const n of document.querySelectorAll(".js-template-suggestion")){const o=n.getAttribute("data-template-suggestion-pattern");if(o){const i=new RegExp(o,"i");n.classList.toggle("d-none",!i.test(t+e))}}}function R(){let e="";for(const t of document.querySelectorAll(".js-breadcrumb-container > .js-path-segment"))e=`${e}${t.textContent}/`;return e}function H(e,t=!1){let n;t||(e.value=e.value.replace("../",""));if(1!==document.querySelector(".js-breadcrumb-container").querySelectorAll(".separator").length){e.previousElementSibling&&e.previousElementSibling.remove();const o=e.previousElementSibling;n=o.textContent.length,o.remove(),t&&(e.value=`${o.textContent}${e.value}`)}N(e.value),window.setTimeout((function(t,n=0){(0===n||t)&&(e.focus(),e.setSelectionRange(n,n))}),1,t,n)}function D(e,t,n){const o=t.trim(),i=document.querySelector(".js-breadcrumb-container");if(o.length>0){const t=i.querySelectorAll(".js-path-segment a");let n;if(t.length>1)n=t[t.length-1].pathname;else{n=i.querySelector(".js-repo-root a").pathname}const r=document.querySelector(".js-crumb-template").cloneNode(!0);r.classList.remove("js-crumb-template"),r.querySelector("a").href=n,r.querySelector("span").textContent=o;const s=document.querySelector(".js-crumb-separator").cloneNode(!0);s.classList.remove("js-crumb-separator"),e.before(r),e.before(s)}e.value=n,N(e.value),window.setTimeout((function(){e.focus(),e.setSelectionRange(0,0)}),1)}e(".js-blob-form",{constructor:HTMLFormElement,initialize(e){setTimeout((()=>{!function(e){for(const t of e.querySelectorAll("input"))"hidden"===t.getAttribute("type")&&t.getAttribute("class")&&null==t.getAttribute("data-default-value")&&t.setAttribute("data-default-value",t.value)}(e),function(e){const t=e.querySelector(".js-blob-contents"),n=e.querySelector(".js-new-filename-field"),o=e.querySelector(".js-blob-filename"),i=o.hasAttribute("data-new-file");if(null!=o.defaultValue&&o.defaultValue.length&&!i)q.set(t,n.value)}(e),E(),A=function(e){let t=e.getAttribute("data-github-confirm-unload");return"yes"!==t&&"true"!==t||(t=""),null==t&&(t="false"),"no"===t||"false"===t?null:function(){return t}}(e),e.addEventListener("submit",(function(){window.onbeforeunload=null}))}))}}),t("change",".js-blob-contents",(function(){const e=document.querySelector(".js-blob-filename");e&&P(e)})),a(".js-blob-filename",(function(e){const t=e.currentTarget;document.querySelector(".js-blob-contents").setAttribute("data-filename",t.value),N(t.value),P(t)})),a(".js-breadcrumb-nav",(function(e){const t=e.currentTarget;I(t),P(t)})),e(".js-breadcrumb-nav",{constructor:HTMLInputElement,initialize(e){I(e),P(e)}}),l("keydown",".js-breadcrumb-nav",(function(e){const t=e.currentTarget;if("Backspace"===e.key&&0===t.selectionStart&&0===t.selectionEnd){const n=t.parentElement;n&&1!==n.querySelectorAll(".separator").length&&(H(t,!0),e.preventDefault())}P(t)})),a(".js-new-blob-commit-summary",(function(e){const t=e.currentTarget;t.closest(".js-file-commit-form").querySelector(".js-too-long-error").classList.toggle("d-none",t.value.length<=50)})),e(".js-check-for-fork",(function(e){const t=e.closest("form"),n=t.querySelector(".js-blob-submit");e.addEventListener("load",(function(){!0===M(t)&&(n.disabled=!0)}))})),t("change",".js-gitignore-template input[type=radio]",(async function(e){const t=e.currentTarget.closest(".js-blob-form"),n=m(t.querySelector(".js-code-editor"));if(null==n)return;const o=e.currentTarget.getAttribute("data-template-url"),i=await fetch(o,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!i.ok)return;const r=await i.text();n.setCode(r)})),e(".js-file-commit-form",(function(e){if("true"===new URLSearchParams(window.location.search.slice(1)).get("start_commit")){const t=e.querySelector(".js-details-target");t&&t.click()}}));const B=["show-code"].concat(["loading-preview","show-preview","no-changes-preview","error-preview"]);function $(e){const t=function(e){return e.classList.contains("show-code")?"show-code":e.classList.contains("template-editor")?"template-editor":"preview"}(e);for(const o of e.querySelectorAll(".js-blob-edit-tab")){const e=o.getAttribute("data-tab")===t;o.classList.toggle("selected",e),e?o.setAttribute("aria-current","true"):o.removeAttribute("aria-current")}const n={name:t};o(document.querySelector(".js-file-editor-nav"),"tab:change",n)}function F(){const e=document.querySelector(".js-branch-name-label-container"),t=!!document.querySelector(".js-quick-pull-choice-option[value=quick-pull]:checked");e&&(e.hidden=!!t)}function U(e){const t=e.currentTarget.closest(".js-code-editor");if(!t.classList.contains("show-code")&&!t.classList.contains("template-editor"))return;t.querySelector(".js-blob-edit-code").setAttribute("data-hotkey","Control+P,Meta+P");const n=t.closest(".js-blob-form");!async function(e,t,n){_(e,"loading-preview"),$(e);const o=t.querySelector("input.js-blob-filename");o.disabled=!0,o.style.cursor="not-allowed";const i=!!document.querySelector(".js-quick-pull-choice-option[value=quick-pull]:checked"),r=document.querySelector(".js-blob-preview-form"),s=m(e);let a=null;if(null!=s)a=s.code();else{if(!e.classList.contains("js-mobile-code-editor"))return;a=e.querySelector(".js-code-textarea").value}u(r,{code:a,commit:t.querySelector(".js-commit-oid").value,blobname:t.querySelector(".js-blob-filename").value,willcreatebranch:i.toString(),checkConflict:n.toString()}),null==W||W.abort();const{signal:l}=W=new AbortController;try{const t=await fetch(r.action,{method:r.method,body:new FormData(r),signal:l});if(!t.ok)throw new Error("network error");const n=await t.text();if(!e.classList.contains("loading-preview"))return;const o=d(document,n);let i=o.querySelector(".data.highlight");if(i||(i=o.querySelector("#readme")),i||(i=o.querySelector(".js-preview-new-file")),i||(i=o.querySelector(".js-preview-msg")),!i&&(i=o.querySelector(".render-container"))&&i.classList.add("is-render-requested"),i){const t=e.querySelector(".js-commit-preview");t.innerHTML="",t.appendChild(i),_(e,"show-preview")}else _(e,"no-changes-preview")}catch(c){e&&_(e,"error-preview")}}(t,n,!0)}function _(e,t){e.classList.remove(...B),e.classList.add(t)}l("keypress","input.js-blob-filename",(function(e){if("Enter"===e.key){const t=e.target.form.querySelector("select.js-code-indent-mode");t&&t.focus(),e.preventDefault()}})),t("edit:visual",".js-code-editor",(function(e){const t=e.currentTarget.closest(".js-code-editor");m(t).setCode(e.detail.value)})),e(".js-branch-name-label-container",F),t("click",".js-blob-edit-code",(function(e){const t=e.currentTarget.closest(".js-code-editor");if(t.classList.contains("show-code"))return;t.querySelector(".js-blob-edit-code").removeAttribute("data-hotkey"),_(t,"show-code"),$(t);const n=m(t);n?(n.refresh(),n.focus()):t.classList.contains("js-mobile-code-editor")&&t.querySelector(".js-code-textarea").focus();const o=t.closest(".js-blob-form").querySelector(".js-blob-filename");o.disabled=!1,o.style.cursor="auto"})),t("click",".js-blob-edit-preview",U),t("codeEditor:preview",".js-code-textarea",(function(e){e.currentTarget.closest(".js-code-editor").classList.contains("show-code")&&U(e)}));let W=null;t("change",".js-quick-pull-choice-option",(function(e){const t="quick-pull"===e.currentTarget.value,n=document.querySelector(".js-quick-pull-target-branch"),o=document.querySelector(".js-quick-pull-choice-value"),i=document.querySelector(".js-blob-submit");if(F(),t){const e=document.querySelector(".js-quick-pull-new-branch-name"),t=e.getAttribute("data-generated-branch");!e.value.length&&t&&(e.value=t),e.focus(),e.select(),n.value=e.value,o.value=n.getAttribute("data-default-value")||"",i.textContent=i.getAttribute("data-pull-text")||""}else n.value=n.getAttribute("data-default-value")||"",o.value="",i.textContent=i.getAttribute("data-edit-text")||""}));let z=null,K=null;const V=n((async function(){const e=document.querySelector(".js-quick-pull-new-branch-name"),t=e.value,n=e.getAttribute("data-generated-branch"),o=document.querySelector(".js-quick-pull-normalization-info"),i=new FormData;i.append("ref",t);const r=e.getAttribute("data-check-url"),s=e.parentElement.querySelector(".js-data-check-url-csrf");null==z||z.abort();const{signal:a}=z=new AbortController;try{const l=await fetch(r,{mode:"same-origin",method:"POST",body:i,signal:a,headers:{Accept:"application/json","Scoped-CSRF-Token":s.value}});if(!l.ok)throw new Error("network error");const c=await l.json();if(t!==e.value)return;const m=c.normalized_ref;if(o.innerHTML=null==c.message_html?"":c.message_html,!m){o.querySelector("code").textContent=n}K&&(K.value=m)}catch(l){if(t!==e.value)return;K&&(K.value=t)}}),200);a(".js-quick-pull-new-branch-name",(function(e){const t=e.target.value;K=document.querySelector(".js-quick-pull-target-branch"),K.value=t,t.length&&V()})),t("click","[data-template-button]",(function(){window.onbeforeunload=null}));i((function(e,t){!function(e){var t="CodeMirror-hint",n="CodeMirror-hint-active";function o(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var o={hint:t};if(n)for(var i in n)o[i]=n[i];return e.showHint(o)},e.defineExtension("showHint",(function(t){t=s(this,this.getCursor("start"),t);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var i=0;i<n.length;i++)if(n[i].head.line!=n[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var r=this.state.completionActive=new o(this,t);r.options.hint&&(e.signal(this,"startCompletion",this),r.update(!0))}}));var i=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},r=window.cancelAnimationFrame||clearTimeout;function s(e,t,n){var o=e.options.hintOptions,i={};for(var r in h)i[r]=h[r];if(o)for(var r in o)void 0!==o[r]&&(i[r]=o[r]);if(n)for(var r in n)void 0!==n[r]&&(i[r]=n[r]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}function a(e){return"string"==typeof e?e:e.text}function l(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},o=e.options.customKeys,i=o?{}:n;function r(e,o){var r;r="string"!=typeof o?function(e){return o(e,t)}:n.hasOwnProperty(o)?n[o]:o,i[e]=r}if(o)for(var s in o)o.hasOwnProperty(s)&&r(s,o[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&r(s,a[s]);return i}function c(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function m(o,i){this.completion=o,this.data=i,this.picked=!1;var r=this,s=o.cm,m=this.hints=document.createElement("ul");m.className="CodeMirror-hints",this.selectedHint=i.selectedHint||0;for(var u=i.list,d=0;d<u.length;++d){var f=m.appendChild(document.createElement("li")),h=u[d],p=t+(d!=this.selectedHint?"":" "+n);null!=h.className&&(p=h.className+" "+p),f.className=p,h.render?h.render(f,i,h):f.appendChild(document.createTextNode(h.displayText||a(h))),f.hintId=d}var g=s.cursorCoords(o.options.alignWithWord?i.from:null),x=g.left,v=g.bottom,y=!0;m.style.left=x+"px",m.style.top=v+"px";var b=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),S=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(o.options.container||document.body).appendChild(m);var w=m.getBoundingClientRect(),k=w.bottom-S,C=m.scrollHeight>m.clientHeight+1,j=s.getScrollInfo();if(k>0){var q=w.bottom-w.top;if(g.top-(g.bottom-w.top)-q>0)m.style.top=(v=g.top-q)+"px",y=!1;else if(q>S){m.style.height=S-5+"px",m.style.top=(v=g.bottom-w.top)+"px";var L=s.getCursor();i.from.ch!=L.ch&&(g=s.cursorCoords(L),m.style.left=(x=g.left)+"px",w=m.getBoundingClientRect())}}var M,T=w.right-b;if(T>0&&(w.right-w.left>b&&(m.style.width=b-5+"px",T-=w.right-w.left-b),m.style.left=(x=g.left-T)+"px"),C)for(var A=m.firstChild;A;A=A.nextSibling)A.style.paddingRight=s.display.nativeBarWidth+"px";return s.addKeyMap(this.keyMap=l(o,{moveFocus:function(e,t){r.changeActive(r.selectedHint+e,t)},setFocus:function(e){r.changeActive(e)},menuSize:function(){return r.screenAmount()},length:u.length,close:function(){o.close()},pick:function(){r.pick()},data:i})),o.options.closeOnUnfocus&&(s.on("blur",this.onBlur=function(){M=setTimeout((function(){o.close()}),100)}),s.on("focus",this.onFocus=function(){clearTimeout(M)})),s.on("scroll",this.onScroll=function(){var e=s.getScrollInfo(),t=s.getWrapperElement().getBoundingClientRect(),n=v+j.top-e.top,i=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(y||(i+=m.offsetHeight),i<=t.top||i>=t.bottom)return o.close();m.style.top=n+"px",m.style.left=x+j.left-e.left+"px"}),e.on(m,"dblclick",(function(e){var t=c(m,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),r.pick())})),e.on(m,"click",(function(e){var t=c(m,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),o.options.completeOnSingleClick&&r.pick())})),e.on(m,"mousedown",(function(){setTimeout((function(){s.focus()}),20)})),e.signal(i,"select",u[this.selectedHint],m.childNodes[this.selectedHint]),!0}function u(e,t){if(!e.somethingSelected())return t;for(var n=[],o=0;o<t.length;o++)t[o].supportsSelection&&n.push(t[o]);return n}function d(e,t,n,o){if(e.async)e(t,o,n);else{var i=e(t,n);i&&i.then?i.then(o):o(i)}}function f(t,n){var o,i=t.getHelpers(n,"hint");if(i.length){var r=function(e,t,n){var o=u(e,i);function r(i){if(i==o.length)return t(null);d(o[i],e,n,(function(e){e&&e.list.length>0?t(e):r(i+1)}))}r(0)};return r.async=!0,r.supportsSelection=!0,r}return(o=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:o})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}o.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var o=t.list[n];o.hint?o.hint(this.cm,t,o):this.cm.replaceRange(a(o),o.from||t.from,o.to||t.to,"complete"),e.signal(t,"pick",o),this.close()},cursorActivity:function(){this.debounce&&(r(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=i((function(){n.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;d(this.options.hint,this.cm,this.options,(function(o){t.tick==n&&t.finishUpdate(o,e)}))}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var o=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(o&&1==t.list.length?this.pick(t,0):(this.widget=new m(this,t),e.signal(t,"shown")))}},m.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,o){if(t>=this.data.list.length?t=o?this.data.list.length-1:0:t<0&&(t=o?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i&&(i.className=i.className.replace(" "+n,"")),(i=this.hints.childNodes[this.selectedHint=t]).className+=" "+n,i.offsetTop<this.hints.scrollTop?this.hints.scrollTop=i.offsetTop-3:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:f}),e.registerHelper("hint","fromList",(function(t,n){var o,i=t.getCursor(),r=t.getTokenAt(i),s=e.Pos(i.line,r.start),a=i;r.start<i.ch&&/\w/.test(r.string.charAt(i.ch-r.start-1))?o=r.string.substr(0,i.ch-r.start):(o="",s=i);for(var l=[],c=0;c<n.words.length;c++){var m=n.words[c];m.slice(0,o.length)==o&&l.push(m)}if(l.length)return{list:l,from:s,to:a}})),e.commands.autocomplete=e.showHint;var h={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}(j)})),i((function(e,t){!function(e){var t={},n=/[^\s\u00a0]/,o=e.Pos;function i(e){var t=e.search(n);return-1==t?0:t}function r(e,t,n){return/\bstring\b/.test(e.getTokenTypeAt(o(t.line,0)))&&!/^[\'\"\`]/.test(n)}function s(e,t){var n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}e.commands.toggleComment=function(e){e.toggleComment()},e.defineExtension("toggleComment",(function(e){e||(e=t);for(var n=this,i=1/0,r=this.listSelections(),s=null,a=r.length-1;a>=0;a--){var l=r[a].from(),c=r[a].to();l.line>=i||(c.line>=i&&(c=o(i,0)),i=l.line,null==s?n.uncomment(l,c,e)?s="un":(n.lineComment(l,c,e),s="line"):"un"==s?n.uncomment(l,c,e):n.lineComment(l,c,e))}})),e.defineExtension("lineComment",(function(e,a,l){l||(l=t);var c=this,m=s(c,e),u=c.getLine(e.line);if(null!=u&&!r(c,e,u)){var d=l.lineComment||m.lineComment;if(d){var f=Math.min(0!=a.ch||a.line==e.line?a.line+1:a.line,c.lastLine()+1),h=null==l.padding?" ":l.padding,p=l.commentBlankLines||e.line==a.line;c.operation((function(){if(l.indent){for(var t=null,r=e.line;r<f;++r){var s=(a=c.getLine(r)).slice(0,i(a));(null==t||t.length>s.length)&&(t=s)}for(r=e.line;r<f;++r){var a=c.getLine(r),m=t.length;(p||n.test(a))&&(a.slice(0,m)!=t&&(m=i(a)),c.replaceRange(t+d+h,o(r,0),o(r,m)))}}else for(r=e.line;r<f;++r)(p||n.test(c.getLine(r)))&&c.replaceRange(d+h,o(r,0))}))}else(l.blockCommentStart||m.blockCommentStart)&&(l.fullLines=!0,c.blockComment(e,a,l))}})),e.defineExtension("blockComment",(function(e,i,r){r||(r=t);var a=this,l=s(a,e),c=r.blockCommentStart||l.blockCommentStart,m=r.blockCommentEnd||l.blockCommentEnd;if(c&&m){if(!/\bcomment\b/.test(a.getTokenTypeAt(o(e.line,0)))){var u=Math.min(i.line,a.lastLine());u!=e.line&&0==i.ch&&n.test(a.getLine(u))&&--u;var d=null==r.padding?" ":r.padding;e.line>u||a.operation((function(){if(0!=r.fullLines){var t=n.test(a.getLine(u));a.replaceRange(d+m,o(u)),a.replaceRange(c+d,o(e.line,0));var s=r.blockCommentLead||l.blockCommentLead;if(null!=s)for(var f=e.line+1;f<=u;++f)(f!=u||t)&&a.replaceRange(s+d,o(f,0))}else a.replaceRange(m,i),a.replaceRange(c,e)}))}}else(r.lineComment||l.lineComment)&&0!=r.fullLines&&a.lineComment(e,i,r)})),e.defineExtension("uncomment",(function(e,i,r){r||(r=t);var a,l=this,c=s(l,e),m=Math.min(0!=i.ch||i.line==e.line?i.line:i.line-1,l.lastLine()),u=Math.min(e.line,m),d=r.lineComment||c.lineComment,f=[],h=null==r.padding?" ":r.padding;e:if(d){for(var p=u;p<=m;++p){var g=l.getLine(p),x=g.indexOf(d);if(x>-1&&!/comment/.test(l.getTokenTypeAt(o(p,x+1)))&&(x=-1),-1==x&&n.test(g))break e;if(x>-1&&n.test(g.slice(0,x)))break e;f.push(g)}if(l.operation((function(){for(var e=u;e<=m;++e){var t=f[e-u],n=t.indexOf(d),i=n+d.length;n<0||(t.slice(i,i+h.length)==h&&(i+=h.length),a=!0,l.replaceRange("",o(e,n),o(e,i)))}})),a)return!0}var v=r.blockCommentStart||c.blockCommentStart,y=r.blockCommentEnd||c.blockCommentEnd;if(!v||!y)return!1;var b=r.blockCommentLead||c.blockCommentLead,S=l.getLine(u),w=S.indexOf(v);if(-1==w)return!1;var k=m==u?S:l.getLine(m),C=k.indexOf(y,m==u?w+v.length:0),j=o(u,w+1),q=o(m,C+1);if(-1==C||!/comment/.test(l.getTokenTypeAt(j))||!/comment/.test(l.getTokenTypeAt(q))||l.getRange(j,q,"\n").indexOf(y)>-1)return!1;var L=S.lastIndexOf(v,e.ch),M=-1==L?-1:S.slice(0,e.ch).indexOf(y,L+v.length);if(-1!=L&&-1!=M&&M+y.length!=e.ch)return!1;M=k.indexOf(y,i.ch);var T=k.slice(i.ch).lastIndexOf(v,M-i.ch);return L=-1==M||-1==T?-1:i.ch+T,(-1==M||-1==L||L==i.ch)&&(l.operation((function(){l.replaceRange("",o(m,C-(h&&k.slice(C-h.length,C)==h?h.length:0)),o(m,C+y.length));var e=w+v.length;if(h&&S.slice(e,e+h.length)==h&&(e+=h.length),l.replaceRange("",o(u,w),o(u,e)),b)for(var t=u+1;t<=m;++t){var i=l.getLine(t),r=i.indexOf(b);if(-1!=r&&!n.test(i.slice(0,r))){var s=r+b.length;h&&i.slice(s,s+h.length)==h&&(s+=h.length),l.replaceRange("",o(t,r),o(t,s))}}})),!0)}))}(j)})),i((function(e,t){!function(e){e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var o=e.modeInfo[n];if(o.mime==t)return o;if(o.mimes)for(var i=0;i<o.mimes.length;i++)if(o.mimes[i]==t)return o}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var o=e.modeInfo[n];if(o.ext)for(var i=0;i<o.ext.length;i++)if(o.ext[i]==t)return o}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var o=e.modeInfo[n];if(o.file&&o.file.test(t))return o}var i=t.lastIndexOf("."),r=i>-1&&t.substring(i+1,t.length);if(r)return e.findModeByExtension(r)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var o=e.modeInfo[n];if(o.name.toLowerCase()==t)return o;if(o.alias)for(var i=0;i<o.alias.length;i++)if(o.alias[i].toLowerCase()==t)return o}}}(j)})),i((function(e,t){!function(e){function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function o(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}function i(e,i){(e.next||e.push)&&t(i,e.next||e.push),this.regex=n(e.regex),this.token=o(e.token),this.data=e}function r(e,t){return function(n,o){if(o.pending){var i=o.pending.shift();return 0==o.pending.length&&(o.pending=null),n.pos+=i.text.length,i.token}if(o.local){if(o.local.end&&n.match(o.local.end)){var r=o.local.endToken||null;return o.local=o.localState=null,r}var s;return r=o.local.mode.token(n,o.localState),o.local.endScan&&(s=o.local.endScan.exec(n.current()))&&(n.pos=n.start+s.index),r}for(var l=e[o.state],c=0;c<l.length;c++){var m=l[c],u=(!m.data.sol||n.sol())&&n.match(m.regex);if(u){m.data.next?o.state=m.data.next:m.data.push?((o.stack||(o.stack=[])).push(o.state),o.state=m.data.push):m.data.pop&&o.stack&&o.stack.length&&(o.state=o.stack.pop()),m.data.mode&&a(t,o,m.data.mode,m.token),m.data.indent&&o.indent.push(n.indentation()+t.indentUnit),m.data.dedent&&o.indent.pop();var d=m.token;if(d&&d.apply&&(d=d(u)),u.length>2&&m.token&&"string"!=typeof m.token){o.pending=[];for(var f=2;f<u.length;f++)u[f]&&o.pending.push({text:u[f],token:m.token[f-1]});return n.backUp(u[0].length-(u[1]?u[1].length:0)),d[0]}return d&&d.join?d[0]:d}}return n.next(),null}}function s(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var o in e)if(e.hasOwnProperty(o)){if(!t.hasOwnProperty(o)||!s(e[o],t[o]))return!1;n++}for(var o in t)t.hasOwnProperty(o)&&n--;return 0==n}function a(t,o,i,r){var a;if(i.persistent)for(var l=o.persistentStates;l&&!a;l=l.next)(i.spec?s(i.spec,l.spec):i.mode==l.mode)&&(a=l);var c=a?a.mode:i.mode||e.getMode(t,i.spec),m=a?a.state:e.startState(c);i.persistent&&!a&&(o.persistentStates={mode:c,spec:i.spec,state:m,next:o.persistentStates}),o.localState=m,o.local={mode:c,end:i.end&&n(i.end),endScan:i.end&&!1!==i.forceEnd&&n(i.end,!1),endToken:r&&r.join?r[r.length-1]:r}}function l(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}function c(t,n){return function(o,i,r){if(o.local&&o.local.mode.indent)return o.local.mode.indent(o.localState,i,r);if(null==o.indent||o.local||n.dontIndentStates&&l(o.state,n.dontIndentStates)>-1)return e.Pass;var s=o.indent.length-1,a=t[o.state];e:for(;;){for(var c=0;c<a.length;c++){var m=a[c];if(m.data.dedent&&!1!==m.data.dedentIfLineStart){var u=m.regex.exec(i);if(u&&u[0]){s--,(m.next||m.push)&&(a=t[m.next||m.push]),i=i.slice(u[0].length);continue e}}}break}return s<0?0:o.indent[s]}}e.defineSimpleMode=function(t,n){e.defineMode(t,(function(t){return e.simpleMode(t,n)}))},e.simpleMode=function(n,o){t(o,"start");var s={},a=o.meta||{},l=!1;for(var m in o)if(m!=a&&o.hasOwnProperty(m))for(var u=s[m]=[],d=o[m],f=0;f<d.length;f++){var h=d[f];u.push(new i(h,o)),(h.indent||h.dedent)&&(l=!0)}var p={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:l?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var o=t.persistentStates;o;o=o.next)n.persistentStates={mode:o.mode,spec:o.spec,state:o.state==t.localState?n.localState:e.copyState(o.mode,o.state),next:n.persistentStates};return n},token:r(s,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:c(s,a)};if(a)for(var g in a)a.hasOwnProperty(g)&&(p[g]=a[g]);return p}}(j)})),i((function(e,t){var n;(n=j).overlayMode=function(e,t,o){return{startState:function(){return{base:n.startState(e),overlay:n.startState(t),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(o){return{base:n.copyState(e,o.base),overlay:n.copyState(t,o.overlay),basePos:o.basePos,baseCur:null,overlayPos:o.overlayPos,overlayCur:null}},token:function(n,i){return(n!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<n.start)&&(i.streamSeen=n,i.basePos=i.overlayPos=n.start),n.start==i.basePos&&(i.baseCur=e.token(n,i.base),i.basePos=n.pos),n.start==i.overlayPos&&(n.pos=n.start,i.overlayCur=t.token(n,i.overlay),i.overlayPos=n.pos),n.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||o&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:e.indent&&function(t,n){return e.indent(t.base,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(n){var i,r;return e.blankLine&&(i=e.blankLine(n.base)),t.blankLine&&(r=t.blankLine(n.overlay)),null==r?i:o&&null!=i?i+" "+r:r}}}})),i((function(e,t){var n;(n=j).multiplexingMode=function(e){var t=Array.prototype.slice.call(arguments,1);function o(e,t,n,o){if("string"==typeof t){var i=e.indexOf(t,n);return o&&i>-1?i+t.length:i}var r=t.exec(n?e.slice(n):e);return r?r.index+n+(o?r[0].length:0):-1}return{startState:function(){return{outer:n.startState(e),innerActive:null,inner:null}},copyState:function(t){return{outer:n.copyState(e,t.outer),innerActive:t.innerActive,inner:t.innerActive&&n.copyState(t.innerActive.mode,t.inner)}},token:function(i,r){if(r.innerActive){var s=r.innerActive;if(c=i.string,!s.close&&i.sol())return r.innerActive=r.inner=null,this.token(i,r);if((u=s.close?o(c,s.close,i.pos,s.parseDelimiters):-1)==i.pos&&!s.parseDelimiters)return i.match(s.close),r.innerActive=r.inner=null,s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-close";u>-1&&(i.string=c.slice(0,u));var a=s.mode.token(i,r.inner);return u>-1&&(i.string=c),u==i.pos&&s.parseDelimiters&&(r.innerActive=r.inner=null),s.innerStyle&&(a=a?a+" "+s.innerStyle:s.innerStyle),a}for(var l=1/0,c=i.string,m=0;m<t.length;++m){var u,d=t[m];if((u=o(c,d.open,i.pos))==i.pos){d.parseDelimiters||i.match(d.open),r.innerActive=d;var f=0;if(e.indent){var h=e.indent(r.outer,"");h!==n.Pass&&(f=h)}return r.inner=n.startState(d.mode,f),d.delimStyle&&d.delimStyle+" "+d.delimStyle+"-open"}-1!=u&&u<l&&(l=u)}l!=1/0&&(i.string=c.slice(0,l));var p=e.token(i,r.outer);return l!=1/0&&(i.string=c),p},indent:function(t,o){var i=t.innerActive?t.innerActive.mode:e;return i.indent?i.indent(t.innerActive?t.inner:t.outer,o):n.Pass},blankLine:function(o){var i=o.innerActive?o.innerActive.mode:e;if(i.blankLine&&i.blankLine(o.innerActive?o.inner:o.outer),o.innerActive)"\n"===o.innerActive.close&&(o.innerActive=o.inner=null);else for(var r=0;r<t.length;++r){var s=t[r];"\n"===s.open&&(o.innerActive=s,o.inner=n.startState(s.mode,i.indent?i.indent(o.outer,""):0))}},electricChars:e.electricChars,innerMode:function(t){return t.inner?{state:t.inner,mode:t.innerActive.mode}:{state:t.outer,mode:e}}}}})),i((function(e,t){!function(e){function t(t,n,o){var i,r=t.getWrapperElement();return(i=r.appendChild(document.createElement("div"))).className=o?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?i.innerHTML=n:i.appendChild(n),e.addClass(r,"dialog-opened"),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",(function(o,i,r){r||(r={}),n(this,null);var s=t(this,o,r.bottom),a=!1,l=this;function c(t){if("string"==typeof t)u.value=t;else{if(a)return;a=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),l.focus(),r.onClose&&r.onClose(s)}}var m,u=s.getElementsByTagName("input")[0];return u?(u.focus(),r.value&&(u.value=r.value,!1!==r.selectValueOnOpen&&u.select()),r.onInput&&e.on(u,"input",(function(e){r.onInput(e,u.value,c)})),r.onKeyUp&&e.on(u,"keyup",(function(e){r.onKeyUp(e,u.value,c)})),e.on(u,"keydown",(function(t){r&&r.onKeyDown&&r.onKeyDown(t,u.value,c)||((27==t.keyCode||!1!==r.closeOnEnter&&13==t.keyCode)&&(u.blur(),e.e_stop(t),c()),13==t.keyCode&&i(u.value,t))})),!1!==r.closeOnBlur&&e.on(u,"blur",c)):(m=s.getElementsByTagName("button")[0])&&(e.on(m,"click",(function(){c(),l.focus()})),!1!==r.closeOnBlur&&e.on(m,"blur",c),m.focus()),c})),e.defineExtension("openConfirm",(function(o,i,r){n(this,null);var s=t(this,o,r&&r.bottom),a=s.getElementsByTagName("button"),l=!1,c=this,m=1;function u(){l||(l=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),c.focus())}a[0].focus();for(var d=0;d<a.length;++d){var f=a[d];!function(t){e.on(f,"click",(function(n){e.e_preventDefault(n),u(),t&&t(c)}))}(i[d]),e.on(f,"blur",(function(){--m,setTimeout((function(){m<=0&&u()}),200)})),e.on(f,"focus",(function(){++m}))}})),e.defineExtension("openNotification",(function(o,i){n(this,c);var r,s=t(this,o,i&&i.bottom),a=!1,l=i&&void 0!==i.duration?i.duration:5e3;function c(){a||(a=!0,clearTimeout(r),e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s))}return e.on(s,"click",(function(t){e.e_preventDefault(t),c()})),l&&(r=setTimeout(c,l)),c}))}(j)})),i((function(e,t){!function(e){var t,n,o=e.Pos;function i(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function r(e,t){for(var n=i(e),o=n,r=0;r<t.length;r++)-1==o.indexOf(t.charAt(r))&&(o+=t.charAt(r));return n==o?e:new RegExp(e.source,o)}function s(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function a(e,t,n){t=r(t,"g");for(var i=n.line,s=n.ch,a=e.lastLine();i<=a;i++,s=0){t.lastIndex=s;var l=e.getLine(i),c=t.exec(l);if(c)return{from:o(i,c.index),to:o(i,c.index+c[0].length),match:c}}}function l(e,t,n){if(!s(t))return a(e,t,n);t=r(t,"gm");for(var i,l=1,c=n.line,m=e.lastLine();c<=m;){for(var u=0;u<l&&!(c>m);u++){var d=e.getLine(c++);i=null==i?d:i+"\n"+d}l*=2,t.lastIndex=n.ch;var f=t.exec(i);if(f){var h=i.slice(0,f.index).split("\n"),p=f[0].split("\n"),g=n.line+h.length-1,x=h[h.length-1].length;return{from:o(g,x),to:o(g+p.length-1,1==p.length?x+p[0].length:p[p.length-1].length),match:f}}}}function c(e,t){for(var n,o=0;;){t.lastIndex=o;var i=t.exec(e);if(!i)return n;if((o=(n=i).index+(n[0].length||1))==e.length)return n}}function m(e,t,n){t=r(t,"g");for(var i=n.line,s=n.ch,a=e.firstLine();i>=a;i--,s=-1){var l=e.getLine(i);s>-1&&(l=l.slice(0,s));var m=c(l,t);if(m)return{from:o(i,m.index),to:o(i,m.index+m[0].length),match:m}}}function u(e,t,n){t=r(t,"gm");for(var i,s=1,a=n.line,l=e.firstLine();a>=l;){for(var m=0;m<s;m++){var u=e.getLine(a--);i=null==i?u.slice(0,n.ch):u+"\n"+i}s*=2;var d=c(i,t);if(d){var f=i.slice(0,d.index).split("\n"),h=d[0].split("\n"),p=a+f.length,g=f[f.length-1].length;return{from:o(p,g),to:o(p+h.length-1,1==h.length?g+h[0].length:h[h.length-1].length),match:d}}}}function d(e,t,n,o){if(e.length==t.length)return n;for(var i=0,r=n+Math.max(0,e.length-t.length);;){if(i==r)return i;var s=i+r>>1,a=o(e.slice(0,s)).length;if(a==n)return s;a>n?r=s:i=s+1}}function f(e,i,r,s){if(!i.length)return null;var a=s?t:n,l=a(i).split(/\r|\n\r?/);e:for(var c=r.line,m=r.ch,u=e.lastLine()+1-l.length;c<=u;c++,m=0){var f=e.getLine(c).slice(m),h=a(f);if(1==l.length){var p=h.indexOf(l[0]);if(-1==p)continue e;return r=d(f,h,p,a)+m,{from:o(c,d(f,h,p,a)+m),to:o(c,d(f,h,p+l[0].length,a)+m)}}var g=h.length-l[0].length;if(h.slice(g)==l[0]){for(var x=1;x<l.length-1;x++)if(a(e.getLine(c+x))!=l[x])continue e;var v=e.getLine(c+l.length-1),y=a(v),b=l[l.length-1];if(y.slice(0,b.length)==b)return{from:o(c,d(f,h,g,a)+m),to:o(c+l.length-1,d(v,y,b.length,a))}}}}function h(e,i,r,s){if(!i.length)return null;var a=s?t:n,l=a(i).split(/\r|\n\r?/);e:for(var c=r.line,m=r.ch,u=e.firstLine()-1+l.length;c>=u;c--,m=-1){var f=e.getLine(c);m>-1&&(f=f.slice(0,m));var h=a(f);if(1==l.length){var p=h.lastIndexOf(l[0]);if(-1==p)continue e;return{from:o(c,d(f,h,p,a)),to:o(c,d(f,h,p+l[0].length,a))}}var g=l[l.length-1];if(h.slice(0,g.length)==g){var x=1;for(r=c-l.length+1;x<l.length-1;x++)if(a(e.getLine(r+x))!=l[x])continue e;var v=e.getLine(c+1-l.length),y=a(v);if(y.slice(y.length-l[0].length)==l[0])return{from:o(c+1-l.length,d(v,y,v.length-l[0].length,a)),to:o(c,d(f,h,g.length,a))}}}}function p(e,t,n,i){var s;this.atOccurrence=!1,this.doc=e,n=n?e.clipPos(n):o(0,0),this.pos={from:n,to:n},"object"==typeof i?s=i.caseFold:(s=i,i=null),"string"==typeof t?(null==s&&(s=!1),this.matches=function(n,o){return(n?h:f)(e,t,o,s)}):(t=r(t,"gm"),i&&!1===i.multiline?this.matches=function(n,o){return(n?m:a)(e,t,o)}:this.matches=function(n,o){return(n?u:l)(e,t,o)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),p.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=o(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(o(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=o(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,o(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var i=o(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=o(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,n){return new p(this.doc,e,t,n)})),e.defineDocExtension("getSearchCursor",(function(e,t,n){return new p(this,e,t,n)})),e.defineExtension("selectMatches",(function(t,n){for(var o=[],i=this.getSearchCursor(t,this.getCursor("from"),n);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)o.push({anchor:i.from(),head:i.to()});o.length&&this.setSelections(o,0)}))}(j)})),i((function(e,t){!function(e){function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function o(e){return e.state.search||(e.state.search=new n)}function i(e){return"string"==typeof e&&e==e.toLowerCase()}function r(e,t,n){return e.getSearchCursor(t,n,{caseFold:i(t),multiline:!0})}function s(e,t,n,o,i){e.openDialog(t,o,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){p(e)},onKeyDown:i})}function a(e,t,n,o,i){e.openDialog?e.openDialog(t,i,{value:o,selectValueOnOpen:!0}):i(prompt(n,o))}function l(e,t,n,o){e.openConfirm?e.openConfirm(t,o):confirm(n)&&o[0]()}function c(e){return e.replace(/\\(.)/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":t}))}function m(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(n){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}var u='<span class="CodeMirror-search-label">Search:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function d(e,n,o){n.queryText=o,n.query=m(o),e.removeOverlay(n.overlay,i(n.query)),n.overlay=t(n.query,i(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,i(n.query)))}function f(t,n,i,r){var l=o(t);if(l.query)return h(t,n);var c=t.getSelection()||l.lastQuery;if(c instanceof RegExp&&"x^"==c.source&&(c=null),i&&t.openDialog){var m=null,f=function(n,o){e.e_stop(o),n&&(n!=l.queryText&&(d(t,l,n),l.posFrom=l.posTo=t.getCursor()),m&&(m.style.opacity=1),h(t,o.shiftKey,(function(e,n){var o;n.line<3&&document.querySelector&&(o=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&o.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((m=o).style.opacity=.4)})))};s(t,u,c,f,(function(n,i){var r=e.keyName(n),s=t.getOption("extraKeys"),a=s&&s[r]||e.keyMap[t.getOption("keyMap")][r];"findNext"==a||"findPrev"==a||"findPersistentNext"==a||"findPersistentPrev"==a?(e.e_stop(n),d(t,o(t),i),t.execCommand(a)):"find"!=a&&"findPersistent"!=a||(e.e_stop(n),f(i,n))})),r&&c&&(d(t,l,c),h(t,n))}else a(t,u,"Search for:",c,(function(e){e&&!l.query&&t.operation((function(){d(t,l,e),l.posFrom=l.posTo=t.getCursor(),h(t,n)}))}))}function h(t,n,i){t.operation((function(){var s=o(t),a=r(t,s.query,n?s.posFrom:s.posTo);(a.find(n)||(a=r(t,s.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(n))&&(t.setSelection(a.from(),a.to()),t.scrollIntoView({from:a.from(),to:a.to()},20),s.posFrom=a.from(),s.posTo=a.to(),i&&i(a.from(),a.to()))}))}function p(e){e.operation((function(){var t=o(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}var g=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',x='<span class="CodeMirror-search-label">With:</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',v='<span class="CodeMirror-search-label">Replace?</span> <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>';function y(e,t,n){e.operation((function(){for(var o=r(e,t);o.findNext();)if("string"!=typeof t){var i=e.getRange(o.from(),o.to()).match(t);o.replace(n.replace(/\$(\d)/g,(function(e,t){return i[t]})))}else o.replace(n)}))}function b(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||o(e).lastQuery,i='<span class="CodeMirror-search-label">'+(t?"Replace all:":"Replace:")+"</span>";a(e,i+g,i,n,(function(n){n&&(n=m(n),a(e,x,"Replace with:","",(function(o){if(o=c(o),t)y(e,n,o);else{p(e);var i=r(e,n,e.getCursor("from")),s=function(){var t,c=i.from();!(t=i.findNext())&&(i=r(e,n),!(t=i.findNext())||c&&i.from().line==c.line&&i.from().ch==c.ch)||(e.setSelection(i.from(),i.to()),e.scrollIntoView({from:i.from(),to:i.to()}),l(e,v,"Replace?",[function(){a(t)},s,function(){y(e,n,o)}]))},a=function(e){i.replace("string"==typeof n?o:o.replace(/\$(\d)/g,(function(t,n){return e[n]}))),s()};s()}})))}))}}e.commands.find=function(e){p(e),f(e)},e.commands.findPersistent=function(e){p(e),f(e,!1,!0)},e.commands.findPersistentNext=function(e){f(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){f(e,!0,!0,!0)},e.commands.findNext=f,e.commands.findPrev=function(e){f(e,!0)},e.commands.clearSearch=p,e.commands.replace=b,e.commands.replaceAll=function(e){b(e,!0)}}(j)})),i((function(e,t){!function(e){function t(e,t,n,o,i){e.openDialog?e.openDialog(t,i,{value:o,selectValueOnOpen:!0}):i(prompt(n,o))}var n='Jump to line: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use line:column or scroll% syntax)</span>';function o(e,t){var n=Number(t);return/^[-+]/.test(t)?e.getCursor().line+n:n-1}e.commands.jumpToLine=function(e){var i=e.getCursor();t(e,n,"Jump to line:",i.line+1+":"+i.ch,(function(t){var n;if(t)if(n=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(t))e.setCursor(o(e,n[1]),Number(n[2]));else if(n=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(t)){var r=Math.round(e.lineCount()*Number(n[1])/100);/^[-+]/.test(n[1])&&(r=i.line+r+1),e.setCursor(r-1,i.ch)}else(n=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(t))&&e.setCursor(o(e,n[1]),i.ch)}))},e.keyMap.default["Alt-G"]="jumpToLine"}(j)})),i((function(e,t){!function(e){var t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,o=/[*+-]\s/;function i(e,n){var o=n.line,i=0,r=0,s=t.exec(e.getLine(o)),a=s[1];do{var l=o+(i+=1),c=e.getLine(l),m=t.exec(c);if(m){var u=m[1],d=parseInt(s[3],10)+i-r,f=parseInt(m[3],10),h=f;if(a!==u||isNaN(f)){if(a.length>u.length)return;if(a.length<u.length&&1===i)return;r+=1}else d===f&&(h=f+1),d>f&&(h=d+1),e.replaceRange(c.replace(t,u+h+m[4]+m[5]),{line:l,ch:0},{line:l,ch:c.length})}}while(m)}e.commands.newlineAndIndentContinueMarkdownList=function(r){if(r.getOption("disableInput"))return e.Pass;for(var s=r.listSelections(),a=[],l=0;l<s.length;l++){var c=s[l].head,m=r.getStateAfter(c.line),u=!1!==m.list,d=0!==m.quote,f=r.getLine(c.line),h=t.exec(f),p=/^\s*$/.test(f.slice(0,c.ch));if(!s[l].empty()||!u&&!d||!h||p)return void r.execCommand("newlineAndIndent");if(n.test(f))/>\s*$/.test(f)||r.replaceRange("",{line:c.line,ch:0},{line:c.line,ch:c.ch+1}),a[l]="\n";else{var g=h[1],x=h[5],v=!(o.test(h[2])||h[2].indexOf(">")>=0),y=v?parseInt(h[3],10)+1+h[4]:h[2].replace("x"," ");a[l]="\n"+g+y+x,v&&i(r,c)}}r.replaceSelections(a)}}(j)})),i((function(e,t){var n;(n="default"in(n=j)?n.default:n).modeInfo.push({name:"ABAP",mime:"text/abap",mode:"abap",ext:["abap"],contrib:!0})}));const X=document.querySelector("link[rel=assets]"),G=(X instanceof HTMLLinkElement&&X.href||"/")+"static/javascripts/codemirror%CONTRIB/mode/%N/%N.js?v=1",J={};function Q(e,t){const n=j.modes[e].dependencies;if(!n)return t();const o=[];for(let r=0;r<n.length;++r)j.modes.hasOwnProperty(n[r])||o.push(n[r]);if(!o.length)return t();const i=function(e,t){let n=t;return()=>{0==--n&&e()}}(t,o.length);for(let r=0;r<o.length;++r)j.requireMode(o[r],i)}async function Y(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const n=document.querySelector(".js-code-editor");if(!n)return;const o=btoa(encodeURIComponent(e.value)),i=new URL(t,window.location.origin),r=new URLSearchParams(i.search.slice(1));r.append("filename",o),i.search=r.toString();const s=await fetch(i.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!s.ok){const e=new Error,t=s.statusText?" "+s.statusText:"";throw e.message=`HTTP ${s.status}${t}`,e}const a=await s.json();(await g(n)).setMode(a.language)}j.autoLoadMode=function(e,t){j.modes.hasOwnProperty(t)||j.requireMode(t,(()=>{e.setOption("mode",e.getOption("mode"))}))},j.requireMode=function(e,t){if(j.modes.hasOwnProperty(e))return Q(e,t);if(J.hasOwnProperty(e))return J[e].push(t);const n=j.findModeByName(e),o=n&&n.contrib?"/contrib":"",i=G.replace(/%CONTRIB/,o).replace(/%N/g,e);window.CodeMirror=j;const r=document.createElement("script");r.src=i,r.crossOrigin="anonymous",document.querySelector("meta[name=codemirror-crossorigin-credentials]")&&(r.crossOrigin="use-credentials");const s=document.getElementsByTagName("script")[0],a=J[e]=[t];if(j.on(r,"load",(()=>{Q(e,(()=>{for(let e=0;e<a.length;++e)a[e]()}))})),null==s.parentNode)throw new Error("first script node must be in the document.");s.parentNode.insertBefore(r,s)},j.defineMode("conflict",((e,t)=>{const n={startState:()=>({insideConflict:!1}),token:(e,t)=>{if(e.sol()){if(e.match(/^<<<<<<</))return t.insideConflict=!0,e.skipToEnd(),"conflict-marker line-background-conflict-background";if(t.insideConflict&&e.match(/^=======/))return e.skipToEnd(),"conflict-marker line-background-conflict-background";if(t.insideConflict&&e.match(/^>>>>>>>/))return t.insideConflict=!1,e.skipToEnd(),"conflict-marker line-background-conflict-background"}return t.insideConflict?(e.next(),"line-background-conflict-background"):(e.next(),null)},blankLine:e=>e.insideConflict?"line-background-conflict-background":null};if(t.baseMode){const o=j.getMode(e,t.baseMode);if("null"!==o.name)return j.overlayMode(o,n,!0);const i=j.findModeByMIME(t.baseMode);j.autoLoadMode(t.editor,i.mode)}return n})),j.defineMIME("application/x-conflict","conflict"),f(".js-detect-filename-language",(e=>{const t=e;h(t,Y),e.addEventListener("blur",(()=>p(t,Y)),{once:!0})}));const Z=/Macintosh/.test(navigator.userAgent)?"Cmd":"Ctrl",ee=y((async function(){const e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),t=await fetch(e);if(200!==t.status)throw new Error("emoji request failed with a "+t.status);const n=[],o=await t.json();for(const i of Object.keys(o)){const e={text:i+":",render:e=>r(s`<img class="emoji emoji-result" height="20" width="20" align="absmiddle" src="${o[i][0]}" alt=":${i}:" async></img> ${i}`,e),hint:(e,t,n)=>{if(2===o[i].length){const r=n.from||t.from,s={ch:r.ch-1,line:r.line};e.replaceRange(o[i][1],s,n.to||t.to,"complete")}else e.replaceRange(n.text,n.from||t.from,n.to||t.to,"complete")}};n.push(e)}return n}));class CodeEditor{constructor(e){if(this.hintIsOpen=!1,this.container=e,!this.container)return;this.textarea=this.container.querySelector(".js-code-textarea"),this.filename=this.textarea.getAttribute("data-filename")||"";const t=this.textarea.value,n=this.textarea.getAttribute("data-codemirror-mode");this.mergeMode="true"===this.textarea.getAttribute("data-merge-mode");const o=this.textarea.clientHeight;this.textarea.style.display="none";const i={lineNumbers:!0,value:t,inputStyle:"contenteditable",theme:"github-light"};this.mergeMode&&(i.gutters=["CodeMirror-linenumbers","merge-gutter"]);const r=this.textarea.parentElement;if(this.editor=j(r,i),0!==o){const e=this.container.querySelector(".CodeMirror");e&&(e.style.height=o+"px")}this.setMode(n),this.setupKeyBindings(),this.setupFormBindings(),this.setupControlBindings(),this.setupScrollOnHashChange()}code(){return this.editor.getValue()}setCode(e){this.editor.setValue(e)}refresh(){this.editor.refresh()}focus(){this.editor.focus()}blur(){this.editor.getInputField().blur()}getDocument(){return this.editor.getDoc()}on(e,t){this.container.addEventListener(e,t)}off(e,t){this.container.removeEventListener(e,t)}setDocument(e){this.editor.swapDoc(e),e.modeOption&&void 0!==e.modeOption.name||this.setMode(e.modeOption)}async loading(e){this.editor.setOption("readOnly",!0),await e(),window.onbeforeunload=null,this.editor.setOption("readOnly",!1)}setMode(e){let t=e;this.mergeMode&&(t={name:"conflict",baseMode:t,editor:this.editor}),"text/x-gfm"===t?this.editor.setOption("mode",{name:"gfm",gitHubSpice:!1}):this.editor.setOption("mode",t);const n=this.container.querySelector(".drag-and-drop");if(n){const e=!("text/x-gfm"===t||"text/x-markdown"===t);n.hidden=e,this.editor.setOption("dragDrop",e)}if(t&&!this.mergeMode){const e=j.findModeByMIME(t);j.autoLoadMode(this.editor,e.mode)}}setConfirmUnloadMessage(e){this.confirmUnload=function(){return e}}clearConfirmUnloadMessage(){this.confirmUnload=void 0,window.onbeforeunload=null}setupFormBindings(){const e=(e,t)=>{this.confirmUnload&&(window.onbeforeunload=this.confirmUnload),b(this.textarea,this.code()),this.isMarkdown(e)&&S("AUTOCOMPLETE_EMOJIS_IN_MARKDOWN_EDITOR")&&this.emojiComplete(e),o(this.container,"change",{editor:e,changes:t})};if(this.editor.on("change",e),this.editor.on("swapDoc",e),this.confirmUnload){const e=this.textarea.closest("form");if(null==e)return;e.addEventListener("submit",(()=>{window.onbeforeunload=null}))}}setupControlBindings(){const e=this.container.querySelector(".js-code-indent-width"),t=this.container.querySelector(".js-code-wrap-mode"),n=this.container.querySelector(".js-code-indent-mode");this.editor.setOption("tabSize",parseInt(e.value)),this.editor.setOption("indentUnit",parseInt(e.value)),this.editor.setOption("lineWrapping","on"===t.value),this.editor.setOption("indentWithTabs","space"!==n.value),e.addEventListener("change",(()=>{this.editor.setOption("tabSize",parseInt(e.value)),this.editor.setOption("indentUnit",parseInt(e.value))})),t.addEventListener("change",(()=>{this.editor.setOption("lineWrapping",null!=t&&"on"===t.value)})),n.addEventListener("change",(()=>{this.editor.setOption("indentWithTabs","space"!==n.value)}))}setupKeyBindings(){this.editor.addKeyMap({Enter:e=>{this.isMarkdown(e)?e.execCommand("newlineAndIndentContinueMarkdownList"):e.execCommand("newlineAndIndent")},Tab:e=>{e.somethingSelected()?e.indentSelection("add"):"space"!==this.container.querySelector(".js-code-indent-mode").value?e.replaceSelection("\t","end","+input"):e.execCommand("insertSoftTab")},"Shift-Tab":e=>{e.indentSelection("subtract")},"Cmd-/":"toggleComment","Ctrl-/":"toggleComment","Shift-Cmd-P":()=>{this.blur(),o(this.textarea,"codeEditor:preview")},[Z+"-I"]:e=>this.insertMdToken(e,"_"),[Z+"-B"]:e=>this.insertMdToken(e,"**"),[Z+"-E"]:e=>this.insertMdToken(e,"`"),[Z+"-K"]:e=>this.insertMdLink(e),[Z+"-S"]:()=>{const e=this.container.closest("form.js-blob-form");if(!e)return;const t=e.querySelector(".js-new-blob-commit-summary");null==t||t.focus()}})}setupScrollOnHashChange(){v((()=>{const e=function(e){let t,n;const o=e.match(/#?(?:L|-)(\d+)/gi);if(o){const e=[];for(t=0,n=o.length;t<n;t++){const n=o[t];e.push(parseInt(n.replace(/\D/g,"")))}return e}return[]}(window.location.hash);e.length>0&&(this.focus(),this.editor.setCursor({line:e[0]-1,ch:0},{scroll:!0}))}))}isMarkdown(e){const t=e.getMode().name;return"gfm"===t||"markdown"===t}insertMdToken(e,t){if(!this.isMarkdown(e))return;const n=e.getSelection();if(n)e.replaceSelection(t+n+t);else{const n=e.getCursor();e.replaceRange(t.repeat(2),n),e.setCursor({line:n.line,ch:n.ch+t.length})}}insertMdLink(e){if(!this.isMarkdown(e))return;const t=e.getSelection(),n=e.getCursor();t?(e.replaceSelection(`[${t}](url)`),e.setSelection({ch:n.ch+3,line:n.line},{ch:n.ch+6,line:n.line})):(e.replaceRange("[](url)",n),e.setCursor({line:n.line,ch:n.ch+1}))}async emojiComplete(e){const t=e.getCursor();if(this.hintIsOpen&&this.isTokenColon(e,t)&&!this.colonShowsEmojiPicker(e,t)&&(this.hintIsOpen=!1),this.colonShowsEmojiPicker(e,t)||this.hintIsOpen)try{const t=await ee();j.showHint(e,(()=>{this.hintIsOpen=!0;const n=e.getCursor(),o=e.getTokenAt(n),i=n.ch;let r=n.ch;const s=n.line;let a=o.string;for(;r-- >-1;){const n=e.getTokenAt({ch:r,line:s}).string;if(":"===n){return{list:t.filter((e=>-1!==e.text.indexOf(a))),from:j.Pos(s,r),to:j.Pos(s,i)}}a=n+a}return{list:[],from:j.Pos(s,0),to:j.Pos(s,i)}}),{completeSingle:!1})}catch(n){}}isFirstCharacterOnLine(e){return 1===e.ch}isPreviousCharacterSpace(e,t){const n=this.previousCharacter(e,t);return/\s/.test(n)}isTokenColon(e,t){return":"===e.getTokenAt(t).string}previousCharacter(e,t){return e.getRange({line:t.line,ch:t.ch-2},{line:t.line,ch:t.ch-1})}colonShowsEmojiPicker(e,t){return this.isFirstCharacterOnLine(t)||this.isPreviousCharacterSpace(e,t)}}function te(e){if(m(e))return;if(e.classList.contains("js-mobile-code-editor"))return;const t=new CodeEditor(e);let n=e.getAttribute("data-github-confirm-unload")||"";"yes"!==n&&"true"!==n||(n=""),"no"!==n&&"false"!==n&&t.setConfirmUnloadMessage(n),o(e,"codeEditor:ready",{editor:t})}function ne(e){return document.querySelector(".js-resolve-conflicts-form").elements.namedItem(e)}(async()=>{await x;for(const e of document.querySelectorAll(".js-code-editor"))te(e);e(".js-code-editor",{constructor:HTMLElement,add:te})})(),document.addEventListener("pjax:end",(function(){for(const e of document.querySelectorAll(".js-code-editor"))te(e)}));const oe=new WeakMap;function ie(e){const t=ne(e);return oe.get(t)}async function re(e){const t=document.querySelector(".js-code-editor");if(!(t instanceof HTMLElement))return;const n=await g(t);function o(){const t=`files[${e.getAttribute("data-filename")||""}]`,n=ie(t);if(null==n)throw new Error(`Expected data for ${t} to be loaded and was not`);se(n)}n.off("change",o),n.on("change",o);const i=t.closest(".js-conflict-resolver");null!=i&&(i.classList.add("loading"),n.loading((async()=>{const t=e.getAttribute("data-filename");if(!t)return;const o=`files[${t}]`,r=document.querySelector(".js-resolve-file-form");r.elements.namedItem("filename").value=o,r.querySelector(".js-filename").textContent=decodeURIComponent(t),r.classList.toggle("is-resolved",e.classList.contains("resolved"));for(const n of e.parentNode.children)n.classList.toggle("selected",n===e);let s=ie(o);if(!s){const t=await fetch(e.href,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!t.ok){const e=new Error,n=t.statusText?" "+t.statusText:"";throw e.message=`HTTP ${t.status}${n}`,e}const n=await t.json();s={document:j.Doc(n.conflicted_file.data,n.conflicted_file.codemirror_mime_type),headDocument:j.Doc(n.head.data,n.head.codemirror_mime_type),baseDocument:j.Doc(n.base.data,n.base.codemirror_mime_type),conflicts:[]},se(s),function(e,t){oe.set(ne(e),t)}(o,s)}i.classList.remove("loading"),n.setDocument(s.document),document.querySelector(".js-code-editor .js-conflict-count").textContent=new Intl.NumberFormat("en-US").format(s.conflicts.length);const a=document.querySelector(".js-code-editor .js-conflict-label");a.textContent=a.getAttribute(1===s.conflicts.length?"data-singular-string":"data-plural-string"),ae(!0)})))}function se(e){let t={};e.conflicts=[],e.document.eachLine((n=>{if(!n)return;const o=e.document;if(o.setGutterMarker(n,"merge-gutter",null),!t.start&&/^<<<<<<</.test(n.text)?t.start=n:t.start&&/^=======/.test(n.text)?t.middle=n:t.start&&/^>>>>>>>/.test(n.text)&&(t.end=n),t.start){let e=".js-line";t.start===n?e=".js-start":t.middle===n?e=".js-middle":t.end===n&&(e=".js-end");const i=document.querySelector(".js-conflict-gutters "+e).cloneNode(!0);o.setGutterMarker(n,"merge-gutter",i)}t.end&&(e.conflicts.push(t),t={})}))}function ae(e){const t=document.querySelector(".js-resolve-file-form").elements.namedItem("filename").value,n=ie(t);if(null==n)throw new Error(`Expected data for ${t} to be loaded and was not`);const o=n.document.getCursor().line,i=n.conflicts;let r=null;for(let s=e?0:i.length-1;e?s<i.length:s>=0;e?s++:s--){const t=i[s].middle;if(null==t)continue;const a=n.document.getLineNumber(t);if(e&&a>o||!e&&a<o){r=a;break}}null!=r&&n.document.setCursor(r,0),n.document.getEditor().focus()}t("click","a.js-conflicted-file",(function(e){const t=e.currentTarget;e.preventDefault(),re(t)})),t("click",".js-prev-conflict",(function(e){ae(!1),e.preventDefault()})),t("click",".js-next-conflict",(function(e){ae(!0),e.preventDefault()})),t("submit","form.js-resolve-file-form",(function(e){const t=e.currentTarget;if(e.preventDefault(),t.querySelector("button.js-mark-resolved").classList.contains("disabled"))return;const n=document.querySelector(".js-conflicted-file.selected");n&&n.classList.add("resolved");if(document.querySelectorAll(".js-conflicted-file.resolved").length===document.querySelectorAll(".js-conflicted-file").length){const e=document.querySelector(".js-resolve-conflicts-complete");e&&e.classList.remove("d-none");const t=document.querySelector(".js-resolve-file-form");t&&t.classList.add("is-resolved")}let o=n;if(null!=o)do{o=o.nextElementSibling}while(o&&!o.classList.contains("js-conflicted-file"));return o instanceof HTMLAnchorElement?re(o):void 0})),t("submit","form.js-resolve-conflicts-form",(async function(e){const t=e.currentTarget;e.preventDefault(),await w();const n=new FormData(t),o=t.querySelectorAll("input.js-file");for(const a of o){const e=ie(a.name);if(null==e)throw new Error(`Expected data for ${a.name} to be loaded and was not`);n.append(a.name,e.document.getValue())}const i=await fetch(t.action,{method:"POST",body:n,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok){const e=new Error,t=i.statusText?" "+i.statusText:"";throw e.message=`HTTP ${i.status}${t}`,e}const r=await i.json();try{if(r.error)throw new Error(r.error);await k(r.job.url);const e=document.querySelector(".js-code-editor");(await g(e)).clearConfirmUnloadMessage(),window.location.pathname+="/.."}catch(s){const e=document.querySelector(".js-resolve-conflicts-complete");e&&e.classList.toggle("d-none");const t=document.querySelector(".js-resolve-conflicts-failed");t&&t.classList.toggle("d-none")}})),t("change",".js-conflict-resolver .js-code-editor",(async function(e){const t=e.currentTarget,n=await g(t),o=document.querySelector(".js-resolve-file-form").elements.namedItem("filename").value,i=ie(o);if(null==i)throw new Error(`Expected data for ${o} to be loaded and was not`);const r=0!==i.conflicts.length||/^[<>]{7}/m.test(n.code()),s=t.querySelector("button.js-mark-resolved");s.classList.toggle("disabled",r),s.classList.toggle("tooltipped",r);const a=r?s.getAttribute("data-disabled-label"):"";a&&s.setAttribute("aria-label",a)})),e(".js-conflict-list",(function(e){const t=e.querySelector(".js-conflicted-file");t instanceof HTMLAnchorElement&&re(t);const n=document.querySelector(".new-discussion-timeline");n&&(n.classList.remove("px-3"),n.classList.add("p-0"))})),t("change",".js-conflict-resolution-choice-option",(function(e){const t=e.target,n=t.closest(".js-resolve-conflicts-form"),o=n.querySelector(".js-resolve-conflicts-button"),i=n.querySelector(".js-quick-pull-new-branch-name");"direct"===t.value?(o.textContent=o.getAttribute("data-update-text"),o.removeAttribute("data-disable-invalid"),o.removeAttribute("disabled"),i.setAttribute("disabled","true")):(o.textContent=o.getAttribute("data-new-branch-text"),o.setAttribute("data-disable-invalid","true"),i.removeAttribute("disabled"),C(n))}))}}}));
//# sourceMappingURL=editor-433522bb.js.map
